<form id="formGetSearchSessionsRankProgressChartData" class="grid-x grid-padding-x">

    <div class="pre-gen-buttons-cont cell small-12">
        <label class="">
            Source data pack:
            <select id="dataPackId" name="dataPackId">
                <option value="NasNet2019">NasNet2019</option>
            </select>
        </label>
        <a class="button" onclick="getSearchSessionsRankProgressChartData(this);">Generate</a>
    </div>
    <div class="chart-cont-general cell small-12">
        <canvas id="searchSessionsRankProgressChartCanvas"></canvas>
    </div>

    <div class="post-gen-buttons-cont small-12">

    </div>
</form>

<script>
    function getSearchSessionsRankProgressChartData(btnElem) {
        
        // Get the form
        const formElem = btnElem.closest("#formGetSearchSessionsRankProgressChartData");
        const chartCanvasElem = document.getElementById("searchSessionsRankProgressChartCanvas");

        const formData = new FormData(formElem);
        const data = {}
        for (var [key, value] of formData.entries()) {
            data[key] = value;
        }

        fetch("/get_search_sessions_rank_progress_chart_data", {
            method: "POST",
            headers: {
            'Content-Type': 'application/json',
            },
            body: JSON.stringify(data),
        })
        .then((res) => res.json())
        .then((data) => {
            if (data.error)
            {
                throw Error(data.error.message);
            }
            plotQuantileLineChart(data, chartCanvasElem);
        })
        .catch((e) => {
        console.log("Error: " + JSON.stringify(e.message));
        showGlobalMessage("Getting search session chart data failed.", "", 5000, "e");
        });

    };


</script>