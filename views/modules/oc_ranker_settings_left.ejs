
<section class="oc-ranker-settings-left-section grid-container">
  <form class=" ranking-model-settings-form grid-x grid-padding-x align-center" action="<%= ocRankerSettingsLeft_ranker_formActionAddress %>" method="GET">
    <div class="small-12 cell">
      <label>Number of results
          <input id="numResultsInput" name="numResults" type="number" value="500" step="1">
      </label>
    </div>

    <div class="small-12 cell">
      <label>Aggregation
        <select id="aggregationInput" name="aggregation">
          <option value="100" selected title="Softmax probabability vector from nerual network.">Softmax</option>
          <option value="200">x^p</option>
          <option value="300" title="">Sine</option>
        </select>
      </label>
    </div>
    <div class="small-12 cell">
      <label>Aggregation parameter
          <input id="aggregationParamInput" name="aggregationParam" type="number" value="1" step="0.1">
      </label>
    </div>

    <div class="small-12 cell">
      <label>Ranking model
        <select id="rankingModelInput" class="model-type-select" name="modelType">
          <option value="1" selected title="Based on Boolean model but images that do not fully satisfy formula are included with lower rank. Ranks are primarly based on number of satisfied clauses. They can be sorted within buckets as well.">Boolean Bucketed</option>
          <option value="2" disabled>Boolean Extended</option>
          <option value="3" title="VIRET tool model.">Viret Base</option>
        </select>
      </label>
    </div>

    <div class="model-properties model-type-0 small-12 cell hidden-by-default">
      <div class="grid-x grid-padding-x text-center">
          <div class="small-12 cell">
              <small>Model specific settings</small>
          </div>
          <div class="small-12 cell">
              
            <label>
              True treshold
              <input id="probTreshold2Input"  name="trueTresholds2" type="number" value="0.005" step="0.00001">
            </label>
          </div>

      </div>
    </div>

    <!-- Boolean custom model settings -->
    <div class="model-properties model-type-1 small-12 cell">
        <div class="grid-x grid-padding-x text-center">
            <div class="small-12 cell">
              <small>Model specific settings</small>
            </div>
            <div class="small-12 cell">
                
              <label>
                True treshold
                <input  id="probTresholdInput" name="trueTreshold" type="number" value="0.005" step="0.00001">
              </label>
            </div>

            <div class="small-12 cell">
                <label>In bucket ranking
                  <select  id="inBucketRankingInput" class="in-bucket-ranking-select" name="inBucketRanking">
                    <option value="0" selected>None</option>
                    <option value="1">Sum</option>
                    <option value="2">Max</option>
                  </select>
                </label>
              </div>
    
        </div>
      </div>

      <!-- Boolean extended model settings -->
      <div class="model-properties model-type-2 small-12 cell hidden-by-default">
        <div class="grid-x grid-padding-x text-center">
            <div class="small-12 cell">
                <small>Model specific settings</small>
            </div>
            <div class="small-12 cell">
                
              <label>
                True treshold
                <input name="trueTreshold3" type="number" value="0.005" step="0.00001">
              </label>
            </div>
    
      
          </div>
        </div>

        <!-- Viret base settings -->
        <div class="model-properties model-type-3 small-12 cell hidden-by-default">
          <div class="grid-x grid-padding-x text-center">
              <div class="small-12 cell">
                  <small>Model specific settings</small>
              </div>
              <div class="small-12 cell">
                  
                <label>
                  True treshold
                  <input id="probTreshold4Input" name="trueTreshold4" type="number" value="0.005" step="0.00001">
                </label>
              </div>
    
              <div class="small-12 cell">
                  <label>Query operation
                    <select id="queryOperationsInput" class="query_operations-select" name="queryOperations">
                      <option value="0" selected>Multiply, Add</option>
                      <option value="1">Add only</option>
                    </select>
                  </label>
                </div>
      
          </div>
        </div>

    <input type="submit" class="button" onclick="ocSaveRankerSettingsLeft(this);" value="Save settings"/>
  </form>
</section>

<!-- Model properties panel toggling -->
<script>
  $( document ).ready(function() {
    $(".model-type-select").change(function() 
      {
        const $this = $(this);
    
        $this.parent().parent().parent().children(".model-properties").hide();
        $this.parent().parent().parent().children(".model-type-" + $this.val()).show();
    
      });

    // Setup provided settings
    $("#numResultsInput").val(<%= selectedSettings.numResults %>).change();
    $("#aggregationInput").val(<%= selectedSettings.aggregation %>).change();
    $("#rankingModelInput").val(<%= selectedSettings.rankingModel %>).change();
    $("#probTresholdInput").val(<%= selectedSettings.probTreshold %>).change();
    $("#inBucketRankingInput").val(<%= selectedSettings.inBucketRanking %>).change();
    $("#probTreshold4Input").val(<%= selectedSettings.probTreshold4 %>).change();
    $("#queryOperationsInput").val(<%= selectedSettings.queryOperations %>).change();


  });
  
</script>

<script>
  // Submit settings to back-end
  function ocSaveRankerSettingsLeft(element)
  {

  }


</script>